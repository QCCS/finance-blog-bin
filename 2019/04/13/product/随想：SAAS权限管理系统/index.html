<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>qianchaochushui</title>
  <meta name="description" content="description">
  <meta name="keywords" content>
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="/">
  <link rel="alternate" href="/atom.xml" title="qianchaochushui">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="最近一直在做B端系统，实际上这很接近saas平台，而公司之所以做这个平台很大的原因就是因为要把目前的业务抽出来，每个模块分不同的角色或做一个权限系统，我也尝试着对权限系统谈一下自己的理解。        面向企业级的SaaS（软件及服务）系统，由于企业用户的规模和内部管理模式千差万别，设计一套具备足够弹性、符合绝大部分目标企业用户需求的权限管理系统，是一个很大的挑战。 我们可以看到，市面上面向多个">
<meta property="og:type" content="article">
<meta property="og:title" content="qianchaochushui">
<meta property="og:url" content="https://qccs.github.io/2019/04/13/product/随想：SAAS权限管理系统/index.html">
<meta property="og:site_name" content="qianchaochushui">
<meta property="og:description" content="最近一直在做B端系统，实际上这很接近saas平台，而公司之所以做这个平台很大的原因就是因为要把目前的业务抽出来，每个模块分不同的角色或做一个权限系统，我也尝试着对权限系统谈一下自己的理解。        面向企业级的SaaS（软件及服务）系统，由于企业用户的规模和内部管理模式千差万别，设计一套具备足够弹性、符合绝大部分目标企业用户需求的权限管理系统，是一个很大的挑战。 我们可以看到，市面上面向多个">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0823%20SAAS.jpg?raw=true">
<meta property="og:image" content="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0823%20quanxian.png?raw=true">
<meta property="og:image" content="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0824%20SaaS1.png?raw=true">
<meta property="og:image" content="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0824%20SaaS2.png?raw=true">
<meta property="og:image" content="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0824%20SaaS3.png?raw=true">
<meta property="og:updated_time" content="2019-04-13T07:51:03.044Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="qianchaochushui">
<meta name="twitter:description" content="最近一直在做B端系统，实际上这很接近saas平台，而公司之所以做这个平台很大的原因就是因为要把目前的业务抽出来，每个模块分不同的角色或做一个权限系统，我也尝试着对权限系统谈一下自己的理解。        面向企业级的SaaS（软件及服务）系统，由于企业用户的规模和内部管理模式千差万别，设计一套具备足够弹性、符合绝大部分目标企业用户需求的权限管理系统，是一个很大的挑战。 我们可以看到，市面上面向多个">
<meta name="twitter:image" content="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0823%20SAAS.jpg?raw=true">
    
  <link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href="//cdn.bootcss.com/node-waves/0.7.5/waves.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
</head>
</html>
<body>
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>


  <script>setLoadingBarProgress(20)</script> 
  <header class="l_header">
	<div class="wrapper">
		<div class="nav-main container container--flex">
			<a class="logo flat-box" href="/">
				qianchaochushui
			</a>
			<div class="menu">
				<ul class="h-list">
					
						<li>
							<a class="flat-box nav-home" href="/">
								首页
							</a>
						</li>
					
						<li>
							<a class="flat-box nav-archives" href="/archives">
								存档
							</a>
						</li>
					
						<li>
							<a class="flat-box nav-categories" href="/categories">
								分类
							</a>
						</li>
					
						<li>
							<a class="flat-box nav-tags" href="/tags">
								标签
							</a>
						</li>
					
						<li>
							<a class="flat-box nav-about" href="/about">
								关于
							</a>
						</li>
					
				</ul>
				<div class="underline"></div>
			</div>
			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="Search">
						<span class="icon icon-search"></span>
					</form>
				</div>
			
			<ul class="switcher h-list">
				
					<li class="s-search"><a href="javascript:void(0)"><span class="icon icon-search flat-box"></span></a></li>
				
				<li class="s-menu"><a href="javascript:void(0)"><span class="icon icon-menu flat-box"></span></a></li>
			</ul>
		</div>
		
		<div class="nav-sub container container--flex">
			<a class="logo" href="javascript:void(0)">
				Word of Forks
			</a>

			<ul class="switcher h-list">
				<li class="s-comment"><a href="javascript:void(0)"><span class="icon icon-chat_bubble_outline flat-box"></span></a></li>
				<li class="s-top"><a href="javascript:void(0)"><span class="icon icon-arrow_upward flat-box"></span></a></li>
				<li class="s-toc"><a href="javascript:void(0)"><span class="icon icon-format_list_numbered flat-box"></span></a></li>
			</ul>
		</div>
	</div>
</header>
<aside class="menu-phone">
	<nav>
		
			<a href="/" class="nav-home nav">
				首页
			</a>
		
			<a href="/archives" class="nav-archives nav">
				存档
			</a>
		
			<a href="/categories" class="nav-categories nav">
				分类
			</a>
		
			<a href="/tags" class="nav-tags nav">
				标签
			</a>
		
			<a href="/about" class="nav-about nav">
				关于
			</a>
		
	</nav>
</aside>

    <script>setLoadingBarProgress(40);</script>
  <div class="l_body">
    <div class='container clearfix'>
      <div class='l_main'>
        <article id="post-product/随想：SAAS权限管理系统" class="post white-box article-type-post" itemscope itemprop="blogPost">
	<section class="meta">
	<h2 class="title">
  	<a href="/2019/04/13/product/随想：SAAS权限管理系统/">
    	
    </a>
  </h2>
	<time>
	  Apr 13, 2019
	</time>
	
	</section>
	
		<section class="toc-wrapper"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-权限从上到下分为三个层级：企业账号（老板账号）、管理员账号、普通账号"><span class="toc-number">1.</span> <span class="toc-text">1. 权限从上到下分为三个层级：企业账号（老板账号）、管理员账号、普通账号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-功能权限和数据权限分离"><span class="toc-number">2.</span> <span class="toc-text">2. 功能权限和数据权限分离</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-部门和角色分离"><span class="toc-number">3.</span> <span class="toc-text">3.部门和角色分离</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-权限系统和其他功能设计的关系"><span class="toc-number">4.</span> <span class="toc-text">4. 权限系统和其他功能设计的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">5.</span> <span class="toc-text">总结</span></a></li></ol></section>
	
	<section class="article typo">
  	<div class="article-entry" itemprop="articleBody">
    	<p>最近一直在做B端系统，实际上这很接近saas平台，而公司之所以做这个平台很大的原因就是因为要把目前的业务抽出来，每个模块分不同的角色或做一个权限系统，我也尝试着对权限系统谈一下自己的理解。</p>
<div align="center"><br>     <center><img id="myImage1" align="center" src="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0823%20SAAS.jpg?raw=true"></center><br></div>

<p>面向企业级的SaaS（软件及服务）系统，由于企业用户的规模和内部管理模式千差万别，设计一套具备足够弹性、符合绝大部分目标企业用户需求的权限管理系统，是一个很大的挑战。</p>
<p>我们可以看到，市面上面向多个行业的综合性SaaS系统，例如销售易、纷享销客等，由于它们的目标客户跨越了多个行业、多种规模，这些企业具备各种各样的内部管理风格和模式，在权限系统的管理上，往往做得非常复杂，不仅具备部门、角色、职位、数据等各个维度的权限管理，各个功能模块还有自己独立的权限管理，虽然具备最大的弹性，却给企业的系统管理带来较大的负担。</p>
<p>我基于面向某个垂直行业的SaaS系统的设计经验，抽象出一套适合中小企业的权限管理体系，目标是最大限度保留系统弹性的同时，把系统复杂度和开发成本尽可能降低。</p>
<p>提炼的三个核心原则：</p>
<ul>
<li>企业-管理员-普通账号三级权限</li>
<li>功能和数据权限分离</li>
<li>部门和角色分离</li>
</ul>
<p>围绕上述三个基本原则，我们力图在满足中小企业需求的前提下保持足够的弹性，并严格控制复杂度和开发成本。详细描述如下。</p>
<h2 id="1-权限从上到下分为三个层级：企业账号（老板账号）、管理员账号、普通账号"><a href="#1-权限从上到下分为三个层级：企业账号（老板账号）、管理员账号、普通账号" class="headerlink" title="1. 权限从上到下分为三个层级：企业账号（老板账号）、管理员账号、普通账号"></a>1. 权限从上到下分为三个层级：企业账号（老板账号）、管理员账号、普通账号</h2><p>对于中小企业来说，公司的实际控制人，往往是公司的创始人或自然人大股东，因此企业账号的使用者以及对应绑定的手机号码，都是公司的实际控制人，他应该掌握最核心、权限最大的企业账号，所以也可以称为“老板账号”。</p>
<p>但是在实际场景中，公司的实际控制人并不会直接管理公司的业务支撑系统，因此，需要在系统首次部署时，创建好企业账号，并由企业账号授权给某一个或多个系统管理员，由系统管理员去完成日常的角色创建、员工导入等工作。系统管理员，对应的一般就是HR或行政部门的管理人员。当然，企业账号的权限高于管理员账号，如果是小微型企业，也可以由企业账号直接替代管理员账号的功能。</p>
<p>除了企业账号和管理员账号之外，其他各级员工所持有的账号，都属于普通账号。普通账号的部门、角色、数据等权限的设置，一律由系统管理员配置。</p>
<p>三个权限层级示意图如下：</p>
<div align="center"><br>     <center><img id="myImage1" align="center" src="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0823%20quanxian.png?raw=true"></center><br></div>

<p>在实际系统中的核心业务步骤如下：</p>
<ol>
<li>企业购买系统时，创建一个企业账号，这个企业账号绑定的手机号码为公司实际控制人的手机号码。该手机号码必要时可以解绑（例如公司实际控制人变更），由于该功能触发频率很低，因此不需要在前端功能中实现，只需要在购买协议中写明，“购买企业可以通过书面方式提出企业账号手机号码绑定变更需求”即可。</li>
<li>在部署和培训阶段，可指导企业账号持有人创建一个或多个管理员账号，该账号一般授权给行政总监或人力资源总监，后续配置即由管理员账号进行。</li>
<li>管理员账号持有人需要接受系统培训，掌握部门创建、角色创建、功能和数据权限分配等基本操作。管理员所有操作都必须记录在案，供企业账号持有人监督，且管理员操作触发异常行为规则（如大量分配高等级权限等）时，系统会通过短信方式通知到企业账号持有人，确保企业账号对管理员的全方位掌控。</li>
<li>企业账号可随时将管理员账号禁用或设定为离职，但管理员账号不可对企业账号进行任何配置或操作。</li>
<li>企业账号默认拥有所有权限。</li>
</ol>
<h2 id="2-功能权限和数据权限分离"><a href="#2-功能权限和数据权限分离" class="headerlink" title="2. 功能权限和数据权限分离"></a>2. 功能权限和数据权限分离</h2><p>功能权限，定义为可见、可以操作的功能范围。例如某一部分菜单，或者某个页面里的各种操作。</p>
<p>数据权限，定义为若干个数据类型里的具体可见范围，例如“客户”就是一个数据类型，它的权限举例如“无权限”、“我的客户”、“我所在部门的客户”、“我所在部门及下级部门的客户”。</p>
<p>通过功能权限和数据权限的分离，我们可以做到以下场景：需要开拓和维护客户的角色集合，都可以拥有“客户”这个菜单的权限，但不同的角色进入“客户”菜单的列表时，看到的客户范围各不相同，极端情况是看不到任何客户。且不同角色在同一个客户页面上，能进行的操作也不同，例如有的角色可以新建客户，有的却不行，这就要由功能权限来控制。</p>
<p>可见，通过功能权限和数据权限的分离和配合，我们在具体的权限分配上有了非常大的弹性，且在技术层面的后台系统的设计上，也非常合理、清晰。</p>
<p>而在具体设计上，需要保证以下4点：</p>
<ol>
<li>正确区分功能和数据，入口性和操作性的都应该归类为功能</li>
<li>正确对数据进行分类，避免存在分类后的某些数据存在交集</li>
<li>数据分类到多细的颗粒度，需要由行业特性决定</li>
<li>数据权限区分为查看、编辑和删除</li>
</ol>
<p>示例图如下，由于涉及具体产品，对某些文字进行了打码：</p>
<div align="center"><br>     <center><img id="myImage1" align="center" src="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0824%20SaaS1.png?raw=true"></center><br></div><br><div align="center"><br>     <center><img id="myImage1" align="center" src="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0824%20SaaS2.png?raw=true"></center><br></div>

<h2 id="3-部门和角色分离"><a href="#3-部门和角色分离" class="headerlink" title="3.部门和角色分离"></a>3.部门和角色分离</h2><p>部门的定义，自然就是公司行政组织架构下的部门。</p>
<p>在本设计方案中，角色等同于职位，而在许多大型的SaaS系统中，为了更大的灵活性，往往会把角色和职位分开，但根据我们的判断，对于中小企业，设定角色一个就够了，职位当然还存在，但仅仅是一个不涉及权限管理的文本title了。</p>
<p>以一个销售公司来说，角色可以包括：“渠道专员”、“渠道总监”、“销售专员”、“销售经理”、“总经理”等等。</p>
<p>所谓的部门和角色分开，就是不同的部门可以有相同的角色，例如如果有渠道一部、渠道二部，则这两个渠道部的员工的角色都可以设定为“渠道专员”，这两个部门的管理者都可以设定为“渠道经理”。再配合功能和数据权限，则进一步配置“渠道专员”具有“渠道”菜单的功能权限，其能够查看的渠道数据权限范围则仅为“我的”，而“渠道经理”同样具有“渠道”菜单的功能权限，但其能够查看的渠道数据权限的范围则扩大为“部门”。</p>
<p>具体设计上：</p>
<ul>
<li>最大部门即为公司</li>
<li>管理员账号和普通账号均可禁用或设置为离职</li>
<li>不同部门可以配置相同角色</li>
<li>相同角色的功能权限和数据权限是一样的</li>
</ul>
<div align="center"><br>     <center><img id="myImage1" align="center" src="https://github.com/gytdove/langxdBlog/blob/master/Picture/2018/0824%20SaaS3.png?raw=true"></center><br></div>

<h2 id="4-权限系统和其他功能设计的关系"><a href="#4-权限系统和其他功能设计的关系" class="headerlink" title="4. 权限系统和其他功能设计的关系"></a>4. 权限系统和其他功能设计的关系</h2><p>总结完权限系统三个核心的基本原则后，我们还需要指出一点：权限系统的设计方案，在整个系统中绝不是孤立的，它能否实现设计目标，并和整个系统完美配合，还需要做到以下几点：</p>
<p><strong>首先，菜单和功能的设计，必须是最小颗粒度，否则就和数据权限产生冲突</strong>。例如：我们只需要一个“客户”菜单即可，不同角色在“客户”菜单里能干什么事情，由功能权限和数据权限配合进行控制，但切不可出现“我的客户”+“全部客户”两个菜单，这明显和数据权限有根本冲突，且也是一种不优美、不合理、扩展性差的设计。</p>
<p><strong>其次，数据的分类，必须符合业务需求，且划分合理</strong>。有些数据都是公开的可以不归入数据权限进行管理，所有角色默认都有即可；有些数据需要进一步细分，例如同样以“客户”举例，在某些公司的业务规则中，就需要将客户的基本信息和联系信息分开控制，管理层可以看客户基本信息，但只有客户负责人才可以看联系信息，这种情况就需要将客户的数据权限分为“客户基本信息”和“客户联系信息”两个。</p>
<p><strong>最后，权限变更的记录和所有账号的行为轨迹记录一样重</strong>要。权限系统本质是进行权力的限制，没有监管的权力必定是会失控的。在出现问题的时候，必须同时配合权限变更的记录、角色变更的记录和账号的行为轨迹记录进行追责和存证，确保维护企业的合法权益。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在合理设计的前提下，权限系统也并非越复杂越好。只有符合目标客户需求并具备最大弹性的权限系统，才是最好的。</p>

  	</div>
	  
		
	
		<div class="art-item-footer">
				
					<span class="art-item-left"><i class="icon icon-chevron-thin-left"></i>prev：<a href="/2019/04/13/product/随想：APP开屏广告/" rel="prev" title>
						 
					</a></span>
				
				
					<span class="art-item-right">next：<a href="/2019/04/13/product/随想：用户留存与拉新/" rel="next" title>
						
					</a><i class="icon icon-chevron-thin-right"></i></span>
				
		</div>
	
	</section>
	
</article>
<script>
	window.subData = {
		title: '',
		tools: true
	}
</script>

      </div>
      <aside class='l_side'>
        
  <section class="m_widget about">

<img class="avatar waves-image" src="https://avatars3.githubusercontent.com/u/13073380?s=460&amp;v=4">

<div class="header">zhouli</div>
<div class="content">
<div class="desc">descriptionTempora mutantur, nos et mutamur in illis ...</div>
</div>
</section>

  <section class="m_widget links">
<div class="header">Links</div>
<div class="content">
    <ul class="entry">
    
        <li><a class="flat-box" target="_blank" href="https://hexo.json119.com">
            <div class="name">tech</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://json119.com/">
            <div class="name">json119</div>
        </a></li>
    
    </ul>
</div>
</section>

  <section class="m_widget categories">
<div class="header">Categories</div>
<div class="content">
    
</div>
</section>

  
<div class="m_widget tagcloud">
    <div class="header">Tags</div>
    <div class="content">
        <a href="/tags/object-Object/" style="font-size: 14px; color: #808080">[object Object]</a>
    </div>
</div>



      </aside>
      <script>setLoadingBarProgress(60);</script>
    </div>
  </div>
  <footer id="footer" class="clearfix">

	<div class="social-wrapper">
  	
      
        <a href="https://github.com/qccs" class="social github" target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="https://hexo.json119.com" class="social vcard" target="_blank" rel="external">
          <span class="icon icon-vcard"></span>
        </a>
      
        <a href="/atom.xml" class="social rss" target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
      
    
  </div>
  
  <div>Theme <a href="https://github.com/stkevintan/hexo-theme-material-flow" class="codename">MaterialFlow</a> designed by <a href="http://keyin.me/" target="_blank">Kevin Tan</a>.</div>
  
</footer>


  <script>setLoadingBarProgress(80);</script>
  

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/node-waves/0.7.5/waves.min.js"></script>
<script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script>
<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "hexo";
  var ROOT = "/"||"/";
  if(!ROOT.endsWith('/'))ROOT += '/';
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
</body>
</html>
